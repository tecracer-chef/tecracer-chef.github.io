<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>FSx for NetApp ONTAP Manageability Options | tecRacer Chef</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://tecracer-chef.github.io/2023/01/fsx-for-netapp-ontap-manageability-options.html><meta http-equiv=content-language content="en-us"><meta property="og:type" content="website"><meta property="og:site_name" content="tecRacer Chef"><meta property="og:title" content="FSx for NetApp ONTAP Manageability Options"><meta property="og:url" content="https://tecracer-chef.github.io/2023/01/fsx-for-netapp-ontap-manageability-options.html"><meta property="og:image" content="https://tecracer-chef.github.io/images/"><meta name=twitter:title content="tecRacer Chef"><meta name=twitter:url content="https://tecracer-chef.github.io/2023/01/fsx-for-netapp-ontap-manageability-options.html"><meta name=twitter:image content="https://tecracer-chef.github.io/images/"><meta name=twitter:card content><link rel=alternate href=/blog/feed title="Patrick Schaumburg" type=application/rss+xml><link href=https://tecracer-chef.github.io/css/theme.css rel=stylesheet><script src=https://tecracer-chef.github.io/js/jquery.min.js></script>
<script src=https://tecracer-chef.github.io/js/uikit.min.js></script>
<script src=https://tecracer-chef.github.io/js/fa-all.js></script></head><body><div class="uk-container uk-container-center"><div class=tm-header><div class="tm-toolbar uk-clearfix uk-hidden-small"><div class=uk-float-right><div class=uk-panel><ul class=uk-subnav><li><a href=https://github.com/tecracer-chef class="uk-icon-hover uk-icon-small uk-icon-github" target=_blank></a></li><li><a href=https://twitter.com/tecracer class="uk-icon-hover uk-icon-small uk-icon-twitter" target=_blank></a></li><li><a href=https://www.xing.com/companies/tecracergmbh%26co.kg class="uk-icon-hover uk-icon-small uk-icon-xing" target=_blank></a></li><li><a href=https://www.linkedin.com/company/tecracer-group/ class="uk-icon-hover uk-icon-small uk-icon-linkedin" target=_blank></a></li><li><a href=https://www.facebook.com/tecRacer class="uk-icon-hover uk-icon-small uk-icon-facebook" target=_blank></a></li></ul></div></div></div><nav class=uk-navbar><a class=uk-navbar-brand href=/><img class="tm-logo uk-responsive-height uk-hidden-small" src=https://tecracer-chef.github.io/img/logo/logo-tr.png alt>
<img class="tm-logo-small uk-responsive-height uk-visible-small" src=https://tecracer-chef.github.io/img/logo/logo-tr.png alt></a><div class=uk-hidden-small><ul class=uk-navbar-nav><li><a href=/ title>Blog</a></li><li><a href=/authors title>Authors</a></li><li><a href=/github/github-prs.html title>Pull Requests</a></li></ul></div><div class="uk-navbar-flip uk-visible-small"><a href=#offcanvas class=uk-navbar-toggle data-uk-offcanvas></a></div></nav></div><div id=content><main id=tm-content class=tm-content><article class=uk-article><div class="tm-article-featured-image uk-cover-background" style=background-image:url(img/2023/01/pexels-daan-stevens-939331-41-logos.png)></div><div class="tm-article-content uk-position-relative"><div class="tm-article-date uk-text-center"><span class=tm-article-date-day>06</span>
<span class=tm-article-date-month>Jan</span></div><h1 class=uk-article-title>FSx for NetApp ONTAP Manageability Options</h1><p class=uk-article-meta>Written by
<a target=_self title="Thomas Heinen's Author Profile SINGLE.HTML" href=/authors/thomas-heinen data-original-title="Author's Profile">Thomas Heinen</a></p><div class=uk-margin><p>While Amazon FSx for NetApp ONTAP (FSxN) seems relatively easy on the AWS level, it is vastly more powerful if you pick another way to manage it.</p><p>This post will look at a quick run-down across the AWS Web Console, NetApp&rsquo;s BlueXP, various APIs, and the CLI.</p><p>As storage is usually regarded to be a &ldquo;boring&rdquo; topic among cloud users, the awareness of all the different features and possibilities is highly limited in this group. We are so used to <a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSSnapshots.html#how_snapshots_work>AWS&rsquo; concept of snapshots</a>, that we take this for granted and likely believe it is the only way to do them.</p><p>The deeper you look into traditional, on-premises data centers, the more you notice how naive some assumptions are. NetApp has long been able to <a href=https://community.netapp.com/t5/Tech-ONTAP-Articles/Back-to-Basics-FlexClone/ta-p/84874>instantly clone multi-Terabyte volumes</a> for actively reusing them as writable copies - only needing space for the differences. Try cloning a big EBS volume, and you will immediately notice it is neither fast nor cheap.</p><p>Of course, a lot of the functionality in NetApp&rsquo;s ONTAP operating system is not valuable for cloud applications. While classical data centers might need <a href=https://docs.netapp.com/us-en/ontap/ndmp/index.html>connections to tape libraries</a> or support for non-Ethernet network types (<a href=https://fibrechannel.org/>FibreChannel</a>, <a href=https://en.wikipedia.org/wiki/InfiniBand>InfiniBand</a>) or protocols like <a href=https://www.storagereview.com/review/nvme-nvme-of-background-overview>NVMeOF</a> or <a href=https://community.netapp.com/t5/Tech-ONTAP-Blogs/Optimize-GPU-Accelerated-Workloads-on-NetApp-Storage-Systems-using-NVIDIA/ba-p/432583>GPU Direct Storage</a>, the cloud is more straightforward: Usually there is only one way of doing things or a handful of alternatives. There is no need to support every available combination of protocols and hardware, high granularity on performance limits, or minimized latency.</p><p>As a consequence, what we usually see as AWS users is only a small subset of the features from ONTAP (which powers FSxN under the hood). But as both AWS and ONTAP are highly API-driven, we can go deeper into the management layers if we have a need for it.</p><h2 id=aws-apis-and-uis>AWS APIs and UIs</h2><p>AWS built an abstraction layer over the existing NetApp APIs and added its own infrastructure management under the hood. In the end, when creating your new FSxN filesystem, there will be a need to deploy a pair of virtual ONTAP instances and orchestrate this process. This fact also explains the time needed for this process, and you can look into all those details from the ONTAP CLI (which we will look at later).</p><p>So AWS needed to balance different things when creating FSxN:</p><ul><li>ease of use for people without a Ph.D. degree in storage technology</li><li>limitations on the AWS infrastructure layer (latency, technologies, maintainability, cost)</li><li>implementation time for exotic/unavailable features</li><li>interface consistency between all AWS service offerings</li><li>&mldr;</li></ul><p>As a result, the AWS Web Console and all AWS tools, like SDKs, CloudFormation, and CLIs, cover the most common use cases.</p><p><img src=/img/2023/01/fsxn-manageability-awsfsxn.png alt="AWS FSxN Console"></p><p>The most basic functionality for FSxN is the management of data volumes and their performance, access from Linux (NFS) or Windows (CIFS), basic backup functionality, monitoring, and high availability.</p><h2 id=bluexp-formerly-cloud-manager>BlueXP (formerly: Cloud Manager)</h2><p>NetApp is also a big software vendor with its own portal to manage products. Previously branded as &ldquo;Cloud Manager&rdquo;, their <a href=https://www.netapp.com/bluexp/>BlueXP</a> portal offers a graphically-oriented interface to manage the majority of their storage products. This portal provides a unified view into systems and services cross-account, cross-cloud and cross-data centers. You can quickly get detailed metrics, set up data replications, or manage data across all of them from a unified workspace.</p><p>While it is a similarly stripped-down interface as the AWS Web Console, it also includes add-ons: managing Kubernetes Storage, more complex backup/replication strategies, Ransomware and Data Loss Protection, and even Cost Optimization (under their <a href=https://spot.io/>NetApp Spot</a> brand).</p><p><img src=/img/2023/01/fsxn-manageability-bluexp.png alt="BlueXP Volume View"></p><h2 id=native-ontap-management>Native ONTAP Management</h2><p>But if you have more specific requirements or things that do not fit the usability/roadmap yet, you find references to NetApp&rsquo;s native management functionality inside of <a href=https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/managing-resources-ontap-apps.html>AWS&rsquo; FSxN documentation</a>.</p><p>You can find references to &ldquo;management endpoints&rdquo; inside the AWS Web Console. These addresses provide access to the cluster-level (FSxN properties, <code>fsxadmin</code> user) or the containers that manage storage sections (Storage Virtual Machines provide native multi-tenancy functionality, <code>vsadmin</code> user). To use these, you have to open up your FSxN security group either for the SSH-based CLI (TCP port 22) or the HTTPS-based API (TCP port 443). Please notice, that you first have to assign passwords to the users, because they are locked by default.</p><p>The modern <a href=https://library.netapp.com/ecmdocs/ECMLP2884821/html/#/>REST API</a> (<code>/api</code>, since ONTAP 9.6) offers a consistent way to query and manage most ONTAP properties. It follows most of the <a href=https://restfulapi.net/>REST API best practices</a> to provide predictable and understandable methods of handling most tasks the base operating system is capable off.</p><p>While usually also deployed on the HTTPS endpoint, NetApp&rsquo;s <a href=https://www.netapp.com/data-management/oncommand-system-documentation/>System Manager</a> is currently disabled on FSxN. This interface covers management functionality right in between that of BlueXP and the base API/CLIs. It is not yet enabled on FSxN as of January 2023, so the comparison table does not include a column for this tool.</p><p>It is also worth mentioning that there has been another API before the modern REST API. The ZAPI was based on XML and offered more extensive feature coverage than its modern cousin. The difference primarily consists of outdated features, deprecated functionality, or available development time.</p><p>As this old API is <a href=https://mysupport.netapp.com/info/communications/ECMLP2880232.html>deprecated by January 2023</a>, it is not of interest anymore.</p><h2 id=infrastructure-as-code>Infrastructure as Code</h2><p>Provisioning resources in a reliable and repeatable way has become the norm. Commonly grouped under the term &ldquo;Infrastructure as Code&rdquo; (IaC), different tools compete for advanced administrators and DevOps specialists.</p><p>In the case of FSxN, the more popular tools are roughly equivalent to the available UIs and APIs. This means that we have CloudFormation/<a href=https://docs.aws.amazon.com/cdk/v2/guide/home.html>CDK</a>, <a href=https://www.terraform.io/>Terraform</a>, <a href=https://www.ansible.com>Ansible</a>, and other tools at our disposal for those tasks.</p><p>My preference for FSxN would be to use Terraform for orchestration (creating filesystems and volumes) and Ansible for the more specific configuration (replication, detailed settings, local user management, hardening). While it hurts me a bit personally as a <a href=https://www.chef.io>Chef Infra</a> expert, it is a fact that NetApp themselves are developing the <a href=https://github.com/ansible-collections/netapp.ontap>Ansible integration</a> and keep it up to date. If the vendor manages it, there is little benefit in choosing another tool.</p><h2 id=comparison-table>Comparison Table</h2><p>Now to the central part of this article: the comparison. I also kept this high-level and specifically want to point out the use cases you might have in real-world scenarios. Most importantly, you will have to deviate from AWS&rsquo; native tooling for large parts of using Windows/CIFS, profit from the instantaneous cloning/replication features, or need block-based iSCSI devices.</p><table><thead><tr><th>Feature</th><th>AWS<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></th><th>BlueXP<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></th><th>REST API<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup></th><th>CLI<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup></th></tr></thead><tbody><tr><td>AWS native backup</td><td>x</td><td>-</td><td>-</td><td>-</td></tr><tr><td>Syncing with non-ONTAP (NFS, SFTP, Azure, GDrive)</td><td>-</td><td>x</td><td>-</td><td>-</td></tr><tr><td><em>in-depth and deprecated features</em></td><td>-</td><td>-</td><td>-</td><td>x</td></tr><tr><td>Create Cluster/FSxN Filesystem</td><td>x</td><td>x</td><td>-</td><td>-</td></tr><tr><td>NFS Volumes</td><td>limited<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup></td><td>x</td><td>x</td><td>x</td></tr><tr><td>CIFS Volumes</td><td>limited<sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup></td><td>limited<sup id=fnref1:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup></td><td>x</td><td>x</td></tr><tr><td>Volume Capacity Management</td><td>-</td><td>x</td><td>x</td><td>x</td></tr><tr><td>iSCSI Volumes</td><td>-</td><td>x</td><td>x</td><td>x</td></tr><tr><td>Volume Cloning</td><td>-</td><td>x</td><td>x</td><td>x</td></tr><tr><td>Native Snapshots</td><td>-</td><td>x</td><td>x</td><td>x</td></tr><tr><td>Syncing with other ONTAP devices</td><td>-</td><td>x</td><td>x</td><td>x</td></tr><tr><td>Ransomware Protection<sup id=fnref:7><a href=#fn:7 class=footnote-ref role=doc-noteref>7</a></sup></td><td>-</td><td>x</td><td>x</td><td>x</td></tr><tr><td>CIFS share management</td><td>-</td><td>-</td><td>x</td><td>x</td></tr><tr><td>S3 Volumes<sup id=fnref1:7><a href=#fn:7 class=footnote-ref role=doc-noteref>7</a></sup></td><td>-</td><td>-</td><td>x</td><td>x</td></tr><tr><td>Data migrations, manual cluster failovers, etc.</td><td>-</td><td>-</td><td>limited</td><td>x</td></tr></tbody></table><p>Even for features marked as &ldquo;supported&rdquo;, REST API and CLI often support various additional options.</p><h2 id=summary>Summary</h2><p>While FSxN might seem pretty straightforward at first glance, the possibilities are much more varied, and its administration varies widely depending on your needs. You will need to combine tools to reach your goals, like Terraform+Ansible or CDS+REST API. And in operations for non-trivial systems, access to the CLI interface is required.</p><p>That being said, <a href=https://tecracer.de>tecRacer</a> is both an AWS Premier Tier Services Partner and a NetApp Gold Partner. If you want to use Amazon FSx for NetApp ONTAP for advanced use cases, migrations, or hybrid cloud scenarios, feel free to contact us at <a href=mailto:aws-sales@tecracer.de>aws-sales@tecracer.de</a></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>also valid for CloudFormation/CDK, <a href=https://registry.terraform.io/providers/hashicorp/aws/latest/docs><code>hashicorp/terraform-provider-aws</code></a>, but not for <a href=https://registry.terraform.io/providers/hashicorp/awscc/latest><code>hashicorp/awscc</code></a> (no FSx resources yet)&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>also mostly valid for <a href=https://registry.terraform.io/providers/NetApp/netapp-cloudmanager/latest/docs><code>NetApp/terraform-provider-netapp-cloudmanager</code></a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>also mostly valid for <a href=https://github.com/ansible-collections/netapp.ontap>Ansible <code>netapp.ontap</code></a> (managed by NetApp)&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>also mostly valid for ZAPI before and including ONTAP 9.12&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p>no selection of NFS protocol or export policies&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6><p>only with Active Directory, not with local users or groups in Workgroup mode. Management via Windows MMC possible.&#160;<a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:7><p>not available on AWS yet&#160;<a href=#fnref:7 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:7 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></div></article><article class=uk-article><div class=container><section class=author-box itemprop=author itemscope itemtype=https://schema.org/Person><div class="media author-box"><div class=media-figure><img alt="Author Image" src=/authors/theinen.png class="avatar avatar-100 photo" height=125 width=125></div><div class=media-body><h2><a href=/authors/thomas-heinen>Thomas Heinen</a></h2><p>Thomas is a Cloud Consultant and Trainer at tecRacer Consulting with a focus on Chef, AWS, DevOps and Security.</p><div class=author-icons><a target=_self class=author-website title="Thomas Heinen's Author Profile" href=/authors/thomas-heinen data-original-title="Author's Profile"><i class="fas fa-id-card"></i></a>
<a target=_new class=author-xing title="Thomas Heinen on Xing" href=https://xing.com/profile/Thomas_Heinen4 data-original-title=Xing><i class="fab fa-xing"></i></a>
<a target=_new class=author-linkedin title="Thomas Heinen on LinkedIn" href=https://linkedin.com/in/thomas-heinen data-original-title=LinkdIn><i class="fab fa-linkedin"></i></a>
<a target=_new class=author-github title="Thomas Heinen on GitHub" href=https://github.com/tecracer-theinen data-original-title=Github><i class="fab fa-github"></i></a></div></div></div></section></div></article></main></div><div id=tm-footer class=tm-footer><div id=tm-footer class="tm-footer tm-footer-margin-top"><div class="uk-panel uk-panel-space uk-text-center"><p>Copyright © 2018-today by <a href=https://chef.tecracer.de/ target=_blank>tecRacer</a></p></div></div></div><div id=offcanvas class=uk-offcanvas aria-hidden=true><div class="uk-offcanvas-bar uk-offcanvas-bar-flip"><div class="uk-panel uk-text-center"><a href=https://tecracer-chef.github.io/></a>
<img src=https://tecracer-chef.github.io/img/logo/logo-tr.png alt></a></div><ul class="uk-nav uk-nav-offcanvas"><li><a href=/ title>Blog</a></li><li><a href=/authors title>Authors</a></li><li><a href=/github/github-prs.html title>Pull Requests</a></li></ul></div></div></div></body></html>